// Items for Recommended for You Section
const items = [
  {
    image: "https://foremade.com/storage/app/public/product/thumbnail/2025-04-13-67fb3a207ba51.webp",
    stars: [],
    company: "Foremade",
    name: "VIZIO 55” 4K",
    price: "500,000.00",
  },
  {
    image: "https://foremade.com/storage/app/public/product/thumbnail/2025-04-15-67fe35401ae7c.webp",
    stars: [],
    company: "Hynolyn Health Servi...",
    name: "Revive",
    price: "43,000.00",
  },
  {
    image: "https://foremade.com/storage/app/public/product/thumbnail/2025-04-15-67fe3c328521a.webp",
    stars: [],
    company: "Hynolyn Health Servi...",
    name: "Vigor Essential",
    price: "24,000.00",
  },
  {
    image: "https://foremade.com/storage/app/public/product/thumbnail/2025-04-15-67fe3a4b3a47d.webp",
    stars: [],
    company: "Hynolyn Health Servi...",
    name: "Memory 24/7",
    price: "32,900.00",
  },
  {
    image: "https://foremade.com/storage/app/public/product/thumbnail/2025-04-15-67fe38c2b422f.webp",
    stars: [],
    company: "Hynolyn Health Servi...",
    name: "Ginseng Coffee",
    price: "28,000.00",
  },
  {
    image: "https://foremade.com/storage/app/public/product/thumbnail/2025-04-15-67fe378f6bdf7.webp",
    stars: [],
    company: "Hynolyn Health Servi...",
    name: "Colon Cleanser Tea",
    price: "165,000",
  },
  {
    image: "https://foremade.com/storage/app/public/product/thumbnail/2025-04-13-67fb393f83e85.webp",
    stars: [],
    company: "Foremade",
    name: "Fitbit Versa 4",
    price: "45,000",
  },
  {
    image: "https://foremade.com/storage/app/public/product/2025-04-13-67fb38979d04a.webp",
    stars: [],
    company: "Electric Kettles",
    name: "Colon Cleanser Tea",
    price: "165,000",
  }
];

// Items for Top Rated Products Section
const topRatedItems = [
  {
    image: "https://foremade.com/storage/app/public/product/thumbnail/2025-04-13-67fb37cec1288.webp",
    stars: [],
    company: "Foremade",
    name: "Ear Headphone",
    price: "50,000.00",
    soldOut: false,
  },
  {
    image: "https://foremade.com/storage/app/public/product/thumbnail/2025-04-13-67fb3684bcd5b.webp",
    stars: [],
    company: "Foremade",
    name: "Men's Italian Loafer Oxf...",
    price: "32,000.00",
    soldOut: true,
  },
  {
    image: "https://foremade.com/storage/app/public/product/thumbnail/2025-04-15-67fe3c328521a.webp",
    stars: [],
    company: "Hynolyn Health Servi...",
    name: "Vigor Essential",
    price: "24,000.00",
    soldOut: false, 
  },
  {
    image: "https://foremade.com/storage/app/public/product/thumbnail/2025-04-15-67fe3a4b3a47d.webp",
    stars: [],
    company: "Hynolyn Health Servi...",
    name: "Memory 24/7",
    price: "32,900.00",
    soldOut: false,
  },
  {
    image: "https://foremade.com/storage/app/public/product/thumbnail/2025-04-15-67fe378f6bdf7.webp",
    stars: [],
    company: "Hynolyn Health Servi...",
    name: "Colon Cleanser Tea",
    price: "16,500.00",
    soldOut: false,
  },
  {
    image: "https://foremade.com/storage/app/public/product/thumbnail/2025-04-15-67fe35401ae7c.webp",
    stars: [],
    company: "Hynolyn Health Servi...",
    name: "Revive",
    price: "43,000.00",
    soldOut: false,
  }
];

// Items for Health & Beauty Section
const healthBeautyItems = [
  {
    image: "https://foremade.com/storage/app/public/product/thumbnail/2025-04-15-67fe3a4b3a47d.webp",
    name: "Memory 24/7",
    price: "32,900.00",
  },
  {
    image: "https://foremade.com/storage/app/public/product/thumbnail/2025-04-15-67fe3c328521a.webp",
    name: "Vigor Essential",
    price: "24,000.00",
  },
  {
    image: "https://foremade.com/storage/app/public/product/thumbnail/2025-04-12-67fa706257013.webp",
    name: "Disaar Moisturizing",
    price: "16,000.00",
  },
  {
    image: "https://foremade.com/storage/app/public/product/thumbnail/2025-04-13-67fb35d9ba8b2.webp",
    name: "Neolife Vegan D",
    price: "21,000.00",
  },
  {
    image: "https://foremade.com/storage/app/public/product/thumbnail/2025-04-15-67fe35401ae7c.webp",
    name: "Revive",
    price: "43,000.00",
  },
  {
    image: "https://foremade.com/storage/app/public/product/thumbnail/2025-04-15-67fe378f6bdf7.webp",
    name: "Colon Cleanser Tea",
    price: "16,500.00",
  }
];

// Items for Home & Kitchen Section
const homeKitchenItems = [
  {
    image: "https://foremade.com/storage/app/public/product/2025-04-13-67fb38979d04a.webp",
    name: "Electric Kettles",
    price: "65,000.00",
  },
  {
    image: "https://foremade.com/storage/app/public/product/2025-04-13-67fb38979d04a.webp",
    name: "Electric Kettles",
    price: "65,000.00",
  },
  {
    image: "https://foremade.com/storage/app/public/product/2025-04-13-67fb38979d04a.webp",
    name: "Electric Kettles",
    price: "65,000.00",
  }
];

// Items for Smart Watches Section
const smartWatchesItems = [
  {
    image: "https://foremade.com/storage/app/public/product/thumbnail/2025-04-13-67fb393f83e85.webp",
    name: "Fitbit Versa 4",
    price: "45,000.00",
  },
  {
    image: "https://foremade.com/storage/app/public/product/thumbnail/2025-04-13-67fb393f83e85.webp",
    name: "Fitbit Versa 4",
    price: "45,000.00",
  },
  {
    image: "https://foremade.com/storage/app/public/product/thumbnail/2025-04-13-67fb393f83e85.webp",
    name: "Fitbit Versa 4",
    price: "45,000.00",
  }
];

// Items for Electronics Section
const electronicsItems = [
  {
    image: "https://foremade.com/storage/app/public/product/thumbnail/2025-04-13-67fb3a207ba51.webp",
    name: "VIZIO 55” 4K",
    price: "500,000.00",
  },
  {
    image: "https://foremade.com/storage/app/public/product/thumbnail/2025-04-13-67fb3a207ba51.webp",
    name: "VIZIO 55” 4K",
    price: "500,000.00",
  },
  {
    image: "https://foremade.com/storage/app/public/product/thumbnail/2025-04-13-67fb3a207ba51.webp",
    name: "VIZIO 55” 4K",
    price: "500,000.00",
  }
];

// Sidebar Toggle
const menuToggle = document.getElementById('menu-toggle');
const closeSidebar = document.getElementById('close-sidebar');
const searchToggle = document.getElementById('search-toggle');
const sidebar = document.getElementById('sidebar');

menuToggle.addEventListener('click', () => {
  sidebar.classList.toggle('-translate-x-full');
});

closeSidebar.addEventListener('click', () => {
  sidebar.classList.add('-translate-x-full');
});

searchToggle.addEventListener('click', () => {
  sidebar.classList.remove('-translate-x-full');
  const searchInput = sidebar.querySelector('input[type="text"]');
  searchInput.focus();
});

// Carousel Logic for Hero Section
const slides = [
  document.getElementById('carousel-slide-0'),
  document.getElementById('carousel-slide-1'),
  document.getElementById('carousel-slide-2'),
];
const dots = [
  document.getElementById('dot-0'),
  document.getElementById('dot-1'),
  document.getElementById('dot-2'),
];
let currentSlide = 0;

function showSlide(index) {
  slides.forEach((slide, i) => {
    slide.classList.toggle('opacity-100', i === index);
    slide.classList.toggle('opacity-0', i !== index);
  });
  dots.forEach((dot, i) => {
    dot.classList.toggle('bg-white', i === index);
    dot.classList.toggle('bg-gray-400', i !== index);
  });
}

function nextSlide() {
  currentSlide = (currentSlide + 1) % slides.length;
  showSlide(currentSlide);
}

// Auto-slide every 5 seconds
setInterval(nextSlide, 5000);

// Manual slide on dot click
dots.forEach((dot, index) => {
  dot.addEventListener('click', () => {
    currentSlide = index;
    showSlide(currentSlide);
  });
});

// Initial slide
showSlide(currentSlide);

// Category Dropdown Navigation
const categoryDropdown = document.getElementById('category-dropdown');
categoryDropdown.addEventListener('change', (e) => {
  if (e.target.value) {
    window.location.href = `#${e.target.value}`;
  }
});

// Dynamically Render Products for All Sections
document.addEventListener('DOMContentLoaded', () => {
  // Render Recommended for You Section
  const productGrid = document.getElementById('product-grid');

  const productCards = items.map(item => `
    <div class="bg-white rounded-lg p-2 flex flex-col items-center">
      <img src="${item.image}" alt="${item.name}" class="w-full h-40 object-cover rounded-sm mb-2">
      <div class="flex items-center mb-2">
        <div class="flex text-yellow-400 text-sm">
          <span>★</span>
          <span>★</span>
          <span>★</span>
          <span>★</span>
          <span>★</span>
        </div>
        <span class="text-gray-600 text-xs ml-1">(${item.stars.length})</span>
      </div>
      <p class="text-sm text-gray-800 text-center uppercase mb-1">${item.company}</p>
      <p class="text-sm text-gray-800 text-center font-bold uppercase mb-1">${item.name}</p>
      <p class="text-gray-800 font-semibold">₦${item.price}</p>
    </div>
  `).join('');

  productGrid.innerHTML = productCards;

  // Render Top Rated Products Section
  const topRatedGrid = document.getElementById('top-rated-grid');

  const topRatedCards = topRatedItems.map(item => `
    <div class="bg-white rounded-lg p-2 flex flex-col items-center snap-start min-w-[180px] lg:min-w-[220px]">
      <img src="${item.image}" alt="${item.name}" class="w-full h-32 object-cover mb-2">
      ${item.soldOut ? '<p class="text-orange-600 text-[10px] text-center mb-2">Sorry this item is currently sold out</p>' : ''}
      <div class="flex items-center mb-2">
        <div class="flex text-yellow-400 text-sm">
          <span>★</span>
          <span>★</span>
          <span>★</span>
          <span>★</span>
          <span>★</span>
        </div>
        <span class="text-gray-600 text-xs ml-1">(${item.stars.length})</span>
      </div>
      <p class="text-sm text-gray-800 text-center uppercase mb-1">${item.company}</p>
      <p class="text-sm text-gray-800 text-center font-bold uppercase mb-1">${item.name}</p>
      <p class="text-gray-800 font-semibold">₦${item.price}</p>
    </div>
  `).join('');

  topRatedGrid.innerHTML = topRatedCards;

  // Render Health & Beauty Section
  const healthBeautyGrid = document.getElementById('health-beauty-grid');

  const healthBeautyCards = healthBeautyItems.map(item => `
    <div class="bg-white rounded-lg p-2 flex flex-col items-center snap-start min-w-[180px] lg:min-w-[220px]">
      <img src="${item.image}" alt="${item.name}" class="w-full h-32 object-cover mb-2">
      <p class="text-sm text-gray-800 text-center font-bold uppercase mb-1">${item.name}</p>
      <p class="text-gray-800 font-semibold">₦${item.price}</p>
    </div>
  `).join('');

  healthBeautyGrid.innerHTML = healthBeautyCards;

  // Render Home & Kitchen Section
  const homeKitchenGrid = document.getElementById('home-kitchen-grid');

  const homeKitchenCards = homeKitchenItems.map(item => `
    <div class="bg-white rounded-lg p-2 flex flex-col items-center snap-start min-w-[180px] lg:min-w-[220px]">
      <img src="${item.image}" alt="${item.name}" class="w-full h-32 object-cover mb-2">
      <p class="text-sm text-gray-800 text-center font-bold uppercase mb-1">${item.name}</p>
      <p class="text-gray-800 font-semibold">₦${item.price}</p>
    </div>
  `).join('');

  homeKitchenGrid.innerHTML = homeKitchenCards;

  // Render Smart Watches Section
  const smartWatchesGrid = document.getElementById('smart-watches-grid');

  const smartWatchesCards = smartWatchesItems.map(item => `
    <div class="bg-white rounded-lg p-2 flex flex-col items-center snap-start min-w-[180px] lg:min-w-[220px]">
      <img src="${item.image}" alt="${item.name}" class="w-full h-32 object-cover mb-2">
      <p class="text-sm text-gray-800 text-center font-bold uppercase mb-1">${item.name}</p>
      <p class="text-gray-800 font-semibold">₦${item.price}</p>
    </div>
  `).join('');

  smartWatchesGrid.innerHTML = smartWatchesCards;

  // Render Electronics Section
  const electronicsGrid = document.getElementById('electronics-grid');

  const electronicsCards = electronicsItems.map(item => `
    <div class="bg-white rounded-lg p-2 flex flex-col items-center snap-start min-w-[180px] lg:min-w-[220px]">
      <img src="${item.image}" alt="${item.name}" class="w-full h-32 object-cover mb-2">
      <p class="text-sm text-gray-800 text-center font-bold uppercase mb-1">${item.name}</p>
      <p class="text-gray-800 font-semibold">₦${item.price}</p>
    </div>
  `).join('');

  electronicsGrid.innerHTML = electronicsCards;

  // Carousel Navigation for Top Rated Products
  const topRatedPrev = document.getElementById('top-rated-prev');
  const topRatedNext = document.getElementById('top-rated-next');

  // Carousel Navigation for Health & Beauty
  const healthBeautyPrev = document.getElementById('health-beauty-prev');
  const healthBeautyNext = document.getElementById('health-beauty-next');

  // Carousel Navigation for Home & Kitchen
  const homeKitchenPrev = document.getElementById('home-kitchen-prev');
  const homeKitchenNext = document.getElementById('home-kitchen-next');

  // Carousel Navigation for Smart Watches
  const smartWatchesPrev = document.getElementById('smart-watches-prev');
  const smartWatchesNext = document.getElementById('smart-watches-next');

  // Carousel Navigation for Electronics
  const electronicsPrev = document.getElementById('electronics-prev');
  const electronicsNext = document.getElementById('electronics-next');

  // Function to update button states (disable when at start/end)
  function updateButtonStates(grid, prevButton, nextButton) {
    const scrollLeft = grid.scrollLeft;
    const maxScrollLeft = grid.scrollWidth - grid.clientWidth;

    prevButton.disabled = scrollLeft <= 0;
    nextButton.disabled = scrollLeft >= maxScrollLeft - 1; // -1 to account for small rounding errors
  }

  // Function to calculate scroll amount based on screen size
  function getScrollAmount() {
    const isDesktop = window.innerWidth >= 1024; // lg breakpoint in Tailwind
    const cardWidth = isDesktop ? 220 : 180; // Match min-w-[180px] and lg:min-w-[220px]
    const cardsPerView = isDesktop ? 4 : 2; // 4 cards on desktop, 2 on mobile
    const gap = 16; // Tailwind gap-4 = 16px
    return (cardWidth * cardsPerView) + (gap * (cardsPerView - 1));
  }

  // Navigation for Top Rated Products
  topRatedPrev.addEventListener('click', () => {
    const scrollAmount = getScrollAmount();
    topRatedGrid.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
  });

  topRatedNext.addEventListener('click', () => {
    const scrollAmount = getScrollAmount();
    topRatedGrid.scrollBy({ left: scrollAmount, behavior: 'smooth' });
  });

  // Navigation for Health & Beauty
  healthBeautyPrev.addEventListener('click', () => {
    const scrollAmount = getScrollAmount();
    healthBeautyGrid.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
  });

  healthBeautyNext.addEventListener('click', () => {
    const scrollAmount = getScrollAmount();
    healthBeautyGrid.scrollBy({ left: scrollAmount, behavior: 'smooth' });
  });

  // Navigation for Home & Kitchen
  homeKitchenPrev.addEventListener('click', () => {
    const scrollAmount = getScrollAmount();
    homeKitchenGrid.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
  });

  homeKitchenNext.addEventListener('click', () => {
    const scrollAmount = getScrollAmount();
    homeKitchenGrid.scrollBy({ left: scrollAmount, behavior: 'smooth' });
  });

  // Navigation for Smart Watches
  smartWatchesPrev.addEventListener('click', () => {
    const scrollAmount = getScrollAmount();
    smartWatchesGrid.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
  });

  smartWatchesNext.addEventListener('click', () => {
    const scrollAmount = getScrollAmount();
    smartWatchesGrid.scrollBy({ left: scrollAmount, behavior: 'smooth' });
  });

  // Navigation for Electronics
  electronicsPrev.addEventListener('click', () => {
    const scrollAmount = getScrollAmount();
    electronicsGrid.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
  });

  electronicsNext.addEventListener('click', () => {
    const scrollAmount = getScrollAmount();
    electronicsGrid.scrollBy({ left: scrollAmount, behavior: 'smooth' });
  });

  // Update button states on scroll and initial load for all sections
  topRatedGrid.addEventListener('scroll', () => updateButtonStates(topRatedGrid, topRatedPrev, topRatedNext));
  healthBeautyGrid.addEventListener('scroll', () => updateButtonStates(healthBeautyGrid, healthBeautyPrev, healthBeautyNext));
  homeKitchenGrid.addEventListener('scroll', () => updateButtonStates(homeKitchenGrid, homeKitchenPrev, homeKitchenNext));
  smartWatchesGrid.addEventListener('scroll', () => updateButtonStates(smartWatchesGrid, smartWatchesPrev, smartWatchesNext));
  electronicsGrid.addEventListener('scroll', () => updateButtonStates(electronicsGrid, electronicsPrev, electronicsNext));
  updateButtonStates(topRatedGrid, topRatedPrev, topRatedNext);
  updateButtonStates(healthBeautyGrid, healthBeautyPrev, healthBeautyNext);
  updateButtonStates(homeKitchenGrid, homeKitchenPrev, homeKitchenNext);
  updateButtonStates(smartWatchesGrid, smartWatchesPrev, smartWatchesNext);
  updateButtonStates(electronicsGrid, electronicsPrev, electronicsNext);

  // Update button states on window resize (to handle screen size changes)
  window.addEventListener('resize', () => {
    updateButtonStates(topRatedGrid, topRatedPrev, topRatedNext);
    updateButtonStates(healthBeautyGrid, healthBeautyPrev, healthBeautyNext);
    updateButtonStates(homeKitchenGrid, homeKitchenPrev, homeKitchenNext);
    updateButtonStates(smartWatchesGrid, smartWatchesPrev, smartWatchesNext);
    updateButtonStates(electronicsGrid, electronicsPrev, electronicsNext);
  });
});